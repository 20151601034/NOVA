#
# README
#
# Copyright (C) 2009-2011 Udo Steinberg <udo@hypervisor.org>
# Economic rights: Technische Universitaet Dresden (Germany)
#
# Copyright (C) 2012 Udo Steinberg, Intel Corporation.
#
# This file is part of the NOVA microhypervisor.
#
# NOVA is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as
# published by the Free Software Foundation.
#
# NOVA is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License version 2 for more details.
#

About this code
===============

This is a prerelease of the NOVA microhypervisor. This code is experimental
and not feature complete. If it breaks, you get to keep both pieces.

Building from source code
=========================

You need the following tools to compile the source code.

* make 3.81 or higher
  available from http://www.gnu.org/software/make/

* for x86_32: gcc 4.2 or higher
  for x86_64: gcc 4.5 or higher
  available from http://gcc.gnu.org/

* binutils 2.21.51.0.3 or higher
  available from http://www.kernel.org/pub/linux/devel/binutils/

You can build a 32-bit microhypervisor binary as follows:
	cd build; make ARCH=x86_32

You can build a 64-bit microhypervisor binary as follows:
	cd build; make ARCH=x86_64

Booting
=======

The NOVA microhypervisor can be started from a multiboot-compliant
bootloader, such as GRUB or PXEGRUB. Here are some examples:

# Boot from harddisk 0, partition 0
title       NOVA
kernel      (hd0,0)/boot/tftp/nova/hypervisor
module      (hd0,0)/...
...

# Boot from TFTP server aa.bb.cc.dd
title	    NOVA
tftpserver  aa.bb.cc.dd
kernel	    (nd)/tftp/nova/hypervisor
module      (nd)/...
...

Command-Line Parameters
=======================

The following command-line parameters are supported for the microhypervisor.
They must be separated by spaces.

iommu		Enables DMA and interrupt remapping.
keyb		Enables the microhypervisor to drive the keyboard.
serial		Enables the microhypervisor to drive the serial console.
spinner		Enables event spinners.
vtlb		Forces use of vTLB instead of nested paging (EPT/NPT).
novga		Disables VGA console.
novpid		Disables TLB tags.

Supported platforms
===================

The NOVA microhypervisor runs on x86 machines that support ACPI.

The virtualization features are available on:

* Intel CPUs with VMX
  regardless of whether the CPU supports nested paging (EPT) or not.

* AMD CPUs with SVM
  regardless of whether the CPU supports nested paging (NPT) or not.

Issues
======

The following is a list of issues you may encounter.

* The code fails to compile.
  Make sure your gcc and binutils meet the minimum requirements listed
  above. If the problem persists, then let us know.

* The microhypervisor does not start under QEMU.
  If this happens, the default CPU model in QEMU may not emulate all of the
  required features. Try using a more advanced model: qemu -cpu core2duo

* The roottask fails to start and prints a "bad elf" message.
  Ensure the roottask is linked such that it does not use a BSS. When
  running "objdump -p" on the roottask binary, filesz must be equal to memsz
  for all loadable segments.

Contact
=======

Feedback and comments should be sent to <udo@hypervisor.org>.
